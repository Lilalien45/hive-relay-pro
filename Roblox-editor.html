<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Web Roblox Studio Engine</title><script src="https://cdn.jsdelivr.net/npm/three@0.160/build/three.min.js"></script></head><body style="margin:0;background:#0f1117;color:white;font-family:Arial"><div id="layout" style="display:flex;flex-direction:column;height:100vh"><div id="topbar" style="background:#161b22;padding:5px"><input id="githubOwner" placeholder="Owner"><input id="githubRepo" placeholder="Repo"><button onclick="loadRepoRoot()">Load Repo</button><input type="file" id="placeLoader" accept=".rbxl,.rbxlx,.rbxm,.rbxmx,.xml,.txt"></div><div id="workspace" style="flex:1;display:flex"><div id="explorer" style="width:220px;background:#1c1f26;overflow:auto;padding:10px"><h3>Explorer</h3><div id="explorerTree"></div></div><div id="viewport" style="flex:1"></div></div><div style="background:#111;padding:10px;font-size:14px">Controls: Right drag = rotate | Scroll = zoom | Touch = rotate/zoom</div></div><script>let scene,camera,renderer,xmlDoc=null,instanceMap=new Map();function initRenderer(){const vp=document.getElementById("viewport");scene=new THREE.Scene();camera=new THREE.PerspectiveCamera(75,vp.clientWidth/vp.clientHeight,.1,1000);renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(vp.clientWidth,vp.clientHeight);vp.appendChild(renderer.domElement);camera.position.set(10,10,10);camera.lookAt(0,0,0);scene.add(new THREE.HemisphereLight(0xffffff,0x444444,1));initCameraControls(vp);animate();}function initCameraControls(vp){let d=false,lx=0,ly=0;vp.addEventListener("mousedown",e=>{if(e.button===2){d=true;lx=e.clientX;ly=e.clientY}});vp.addEventListener("mouseup",()=>d=false);vp.addEventListener("mousemove",e=>{if(!d)return;const dx=e.clientX-lx,dy=e.clientY-ly,s=.01;camera.position.x+=dx*s;camera.position.y-=dy*s;lx=e.clientX;ly=e.clientY});vp.addEventListener("wheel",e=>camera.position.z+=e.deltaY*.01);vp.oncontextmenu=e=>e.preventDefault();}function animate(){requestAnimationFrame(animate);renderer.render(scene,camera);}async function loadRepoRoot(){const owner=githubOwner.value,repo=githubRepo.value;const res=await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/`);const data=await res.json();const tree=document.getElementById("explorerTree");tree.innerHTML="";data.forEach(item=>{const div=document.createElement("div");div.textContent=item.name;if(item.type==="dir")div.onclick=()=>loadGitFolder(owner,repo,item.path);else div.onclick=()=>loadGitFile(item.download_url,item.name);tree.appendChild(div)})}async function loadGitFolder(owner,repo,path){const res=await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${path}`);const data=await res.json();const tree=document.getElementById("explorerTree");tree.innerHTML="";data.forEach(item=>{const div=document.createElement("div");div.textContent=item.name;if(item.type==="dir")div.onclick=()=>loadGitFolder(owner,repo,item.path);else div.onclick=()=>loadGitFile(item.download_url,item.name);tree.appendChild(div)})}async function loadGitFile(url,name){const text=await (await fetch(url)).text();loadRobloxFileFromText(text,name)}function loadRobloxFileFromText(text,filename){if(filename.match(/\.(rbxl|rbxlx|rbxm|rbxmx|xml|txt)$/))parseRobloxXML(text)}placeLoader.addEventListener("change",e=>{const file=e.target.files[0];if(!file)return;const r=new FileReader();r.onload=()=>loadRobloxFileFromText(r.result,file.name);r.readAsText(file)});function parseRobloxXML(text){xmlDoc=new DOMParser().parseFromString(text,"text/xml");buildExplorer();buildScenePreview()}function buildExplorer(){const tree=document.getElementById("explorerTree");tree.innerHTML="";xmlDoc.documentElement.childNodes.forEach(node=>{if(node.nodeName==="Item")tree.appendChild(buildExplorerNode(node))})}function buildExplorerNode(node){const div=document.createElement("div");div.style.marginLeft="10px";const nameNode=node.querySelector("Properties > string[name='Name']");div.textContent=nameNode?nameNode.textContent:node.getAttribute("class");div.onclick=()=>focusInstance(node);node.childNodes.forEach(c=>{if(c.nodeName==="Item")div.appendChild(buildExplorerNode(c))});return div}function parseVector3(s){const a=s.split(",");return{x:parseFloat(a[0])||1,y:parseFloat(a[1])||1,z:parseFloat(a[2])||1}}function parseColor3(s){const a=s.split(",");return new THREE.Color(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2]))}function parseCFrame(s){const n=s.split(",");return{pos:{x:parseFloat(n[0])||0,y:parseFloat(n[1])||0,z:parseFloat(n[2])||0},rot:{x:parseFloat(n[3])||0,y:parseFloat(n[4])||0,z:parseFloat(n[5])||0}}}function buildScenePreview(){scene.clear();instanceMap.clear();xmlDoc.documentElement.childNodes.forEach(n=>{if(n.nodeName==="Item")renderInstance(n,null)});autoFrameCamera()}function renderInstance(node,parent){const cls=node.getAttribute("class");let obj=null;if(cls==="Part"){const size=node.querySelector("Properties > Vector3[name='Size']");const cf=node.querySelector("Properties > CoordinateFrame[name='CFrame']");const color=node.querySelector("Properties > Color3[name='Color']");const s=size?parseVector3(size.textContent):{x:1,y:1,z:1};obj=new THREE.Mesh(new THREE.BoxGeometry(s.x,s.y,s.z),new THREE.MeshStandardMaterial({color:color?parseColor3(color.textContent):Math.random()*0xffffff}));if(cf){const c=parseCFrame(cf.textContent);obj.position.set(c.pos.x,c.pos.y,c.pos.z);obj.rotation.set(c.rot.x,c.rot.y,c.rot.z)}}else if(cls==="Model"||cls==="Folder")obj=new THREE.Group();if(obj){instanceMap.set(node,obj);(parent?parent:scene).add(obj);node.childNodes.forEach(c=>{if(c.nodeName==="Item")renderInstance(c,obj)})}}function autoFrameCamera(){const box=new THREE.Box3().setFromObject(scene);const center=box.getCenter(new THREE.Vector3());const size=box.getSize(new THREE.Vector3());const d=Math.max(size.x,size.y,size.z)*2||10;camera.position.set(center.x+d,center.y+d,center.z+d);camera.lookAt(center)}function focusInstance(node){const obj=instanceMap.get(node);if(!obj)return;const box=new THREE.Box3().setFromObject(obj);camera.lookAt(box.getCenter(new THREE.Vector3()))}initRenderer();</script></body></html>
